<head>
	<title>Forster's List</title>

</head>

<body>

<div class="sticky">
	<nav class="top-bar" data-topbar role="navigation">
			<ul class="title-area">
				<li class="name">
					<h1><a href="#">FL</a></h1>
				</li>
				<li class="has-form">
					<form class="new-task">
						<div class="row collapse">
							<div class="large-8 small-9 columns">
								<input type="text" name="text" placeholder="New todo">
							</div>
							<div class="large-4 small-3 columns">
								<input type="submit" class="alert button expand" value="Go" />
							</div>
						</div>
					</form>
				</li>
 				<!-- Remove the class "menu-icon" to get rid of menu icon. Take out "Menu" to just have icon alone -->
				<li class="toggle-topbar menu-icon"><a href="#"><span>M</span></a></li>
			</ul>

			<section class="top-bar-section">
				<!-- Right Nav Section -->
				<ul class="right">
					<li class="large-only"><a href="">Test</a></li>
					<li class="has-dropdown">
						<a href="#">Dropdown</a>
						<ul class="dropdown">
							<li><a href="#">link</a></li>
							<li><a href="#">link</a></li>
						</ul>
					</li>
				</ul>

				<!-- Left Nav Section -->
				<ul class="left">

				</ul>
			</section>
		</nav>
</div>



		<div style="background-color: #eee; padding: 4px 0;">
		<div class="row">
			<div class="large-8 small-8 columns">
					Forster's List
			</div>
			<div class="large-4 small-4 columns">
				{{> loginButtons align="right"}}
			</div>
		</div>
	</div>

	{{#if currentUser}}


			{{> todos}}


			{{> closedTask}}


	{{/if}} <!-- end: currentUser -->


	<br /><br /><br />

</body>



<!-- Cycle through the todolist -->
<template name="todos">

	{{#if tasks.count != undefined}}

			<!--  Inbox title -->
			<div class="row">
					<div class="small-12 large-12 columns">
							<h4><span class="label">{{tasks.count}}</span> Inbox</h4>
					</div>
			</div>

			<div class="row">
				<div class="large-12 columns">

					<!--  Todo items -->
					{{#each tasks}}
							{{> task}}
					{{/each}}

				</div>
			</div>


			<!-- a spacer row -->
			<div class="row">
					<div class="small-12 columns">
							<p>&nbsp;</p>
					</div>
			</div>

	{{else}}
			<!-- Nothing to show yet -->
			<div class="row">
					<div class="small-12 columns">
							<p>Nothing to show yet. Get started by entering a few items you like to get done!</p>
					</div>
			</div>

	{{/if}} <!-- end: If ther is nothing to show -->

</template>

<!--  Open todo items -->
<template name="task">

	{{#markdown}}<h4><a href="#" data-reveal-id="{{_id}}">{{text}}</a></h4>{{/markdown}}

	<div id="{{_id}}" class="reveal-modal" data-reveal aria-labelledby="{{_id}}" aria-hidden="true" role="dialog">

			{{#markdown}}<h2 id="modalTitle">{{text}}</h2>{{/markdown}}

			<!-- Radius Button Group -->
			{{> activeTodoActionButtons}}

	  	<a class="close-reveal-modal" aria-label="Close">&#215;</a>
	</div>
	<script>
		$(document).foundation();
		$(document).foundation('reveal', 'reflow');
	</script>
</template><!-- End: List the open tasks -->

<template name="activeTodoActionButtons">

	<br />
	<ul class="button-group radius text-center btns">
		<li><button type="button" class="small button success radius btnDone">Done</button></li>
		<li><button type="button" class="small button primary btnDismiss">Dismiss</button></li>
		<li><button type="button" class="small button alert radius btnClose">Completed</button></li>
	</ul>

	<script>
		// $(document).foundation('reveal', 'reflow');
	</script>
</template>


<!-- Cycle through the todolist -->
<template name="closedTask">

	{{#if closedTasks.count != undefined}}

			<!--  Inbox title -->
			<div class="row">
					<div class="small-12 large-12 columns">
						<p data-magellan-destination="done-dismissed">
							<strong>Closed/Dismissed</strong> &nbsp;&nbsp;&nbsp;	<span class="label round radius">{{closedTasks.count}}</span>
							<a name="done-dismissed"></a>
						</p>
					</div>
			</div>

			<!--  Todo items -->
			{{#each closedTasks}}
					<div class="row">
							<div class="small-12 columns">

								<ul class="button-group radius left">
								  <li><a href="#" class="button tiny btnRevive">&#x23;</a></li>
								  <li><a href="#" class="button tiny alert btnDelete">&#x78;</a></li>
								</ul>
								<p class="closed">&nbsp;&nbsp;&nbsp;<strike class="{{isDismissed standing}}">{{text}}</strike></p>

						</div>
					</div>
			{{/each}}
			<!-- a spacer row -->
			<div class="row">
					<div class="small-12 columns">
							<p>&nbsp;</p>
					</div>
			</div>

	{{else}}
			<!-- Nothing to show yet -->
			<div class="row">
					<div class="small-12 columns">
							<p>Nothing to show yet. Get started by entering a few items you like to get done!</p>
					</div>
			</div>

  {{/if}} 	<!-- end: If ther is nothing to show -->

</template>
