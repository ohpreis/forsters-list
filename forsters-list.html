<head>
	<title>Forster's List</title>
</head>

<body>

	<nav class="navbar navbar-default navbar-fixed-top">
	<div class="container">
		<div class="row">
			<form class="form-inline new-task" role="search">
				<div class="col-xs-2">
					<p style="margin-top: 8px; font-weight:bold; line-height: 2em;" title="Forster's List">FL</p>
				</div>
			<div class="col-xs-8">

	        <div class="form-group col-xs-12" style="margin-top: 6px;">
	          <input style="width: 100%;" type="text" name="text" class="form-control" placeholder="New todo">
	        </div>
			</div>
			<div class="col-xs-2">
				<p style="margin-top: 6px;"><button type="submit" class="btn btn-primary">Go</button></p>
			</div>
			</form>
		</div>
	</div>
	</nav>

	<div class="container">

		<div class="row">

				<ol class="breadcrumb">
					<li>Forster's List</li>
					<li>{{> loginButtons align="left"}}</li>
					{{#if currentUser}}

					{{else}}
						<li><span class="label label-warning">Please login!</span></li>
					{{/if}}
				</ol>

		</div>


		{{#if currentUser}}


				{{> todos}}


				{{> closedTodos}}

		{{/if}} <!-- end: currentUser -->

	</div>



</body>



<!-- Cycle through the todolist -->
<template name="todos">

	{{#if tasks.count != undefined}}

			<div class="row">
				<div class="col-xs-12">
					<table class="table">
						<caption>Inbox <span class="badge pull-right">{{tasks.count}}</span></caption>
						<tbody>
							<!--  Todo items -->
							{{#each tasks}}
									{{> task}}
							{{/each}}
						</tbody>
					</table>

				</div>
			</div>


			<!-- a spacer row -->
			<div class="row">
					<div class="col-xs-12">
							<p>&nbsp;</p>
					</div>
			</div>

	{{else}}
			<!-- Nothing to show yet -->
			<div class="row">
					<div class="col-xs-12">
							<p>Start by adding a few todos.</p>
					</div>
			</div>
	{{/if}} <!-- end: If ther is nothing to show -->

</template>

<!--  Open todo items -->
<template name="task">

		<tr><td>
		<h4>
			<a href="#" class="openModal" data-toggle="modal" data-target="#{{_id}}">{{text}}</a>
		</h4>

		<!-- Modal -->
		<div class="modal fade" id="{{_id}}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
			<div class="modal-dialog" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
						<h4 class="modal-title" id="myModalLabel">FL</h4>
					</div>
					<div class="modal-body">
						<p class="lead">{{#markdown}}{{text}}{{/markdown}}</p>
						<p>Worked on: <span class="label label-primary pulls-right">{{touched}}</span></p>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-success btnDone" data-dismiss="modal">Worked on</button>
						<button type="button" class="btn btn-warning btnDismiss" data-dismiss="modal">Dismiss</button>
						<button type="button" class="btn btn-primary btnClose" data-dismiss="modal">Done!</button>
						<button type="button" class="btn btn-default" data-dismiss="modal">&times;</button>
					</div>
				</div>
			</div>
		</div>
	</td></tr>

</template><!-- End: List the open tasks -->

<template name="closedTodos">

		{{#if closedTasks.count != undefined}}
				<div class="row">
					<div class="col-xs-12">
						<table class="table">
							<caption>Completed/Dismissed <span class="badge pull-right">{{closedTasks.count}} most recent</span></caption>
							<tbody>
								<!--  Todo items -->
								{{#each closedTasks}}
										{{> closedTask}}
								{{/each}}
							</tbody>
						</table>

					</div>
				</div>
		{{else}}
				<!-- Nothing to show yet -->
				<div class="row">
						<div class="col-xs-12">
								<p>The deleted/dismissed section is empty.</p>
						</div>
				</div>

		{{/if}} <!-- end: If ther is nothing to show -->

</template>

<!-- Cycle through the todolist -->
<template name="closedTask">

			<tr class="{{isDismissed standing}}"><td>
			{{#markdown}}<h5><s><a href="#" class="openModal" data-toggle="modal" data-target="#{{_id}}">{{text}}</a></s></h5>{{/markdown}}

			<!-- Modal -->
			<div class="modal fade" id="{{_id}}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
				<div class="modal-dialog" role="document">
					<div class="modal-content">
						<div class="modal-header">
							<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
							<h4 class="modal-title" id="myModalLabel">FL</h4>
						</div>
						<div class="modal-body">
							<p class="lead">{{text}}</p>
						</div>
						<div class="modal-footer">
							<button type="button" class="btn btn-danger btnDelete" data-dismiss="modal">Delete</button>
							<button type="button" class="btn btn-primary btnRevive">Revive</button>
							<button type="button" class="btn btn-default" data-dismiss="modal">&times;</button>
						</div>
					</div>
				</div>
			</div>
		</td></tr>


</template>
