<head>
	<title>Forster's List</title>

</head>

<body>

	<!-- Title and Login Button -->
	<div class="row">
		<div class="small-6 large-6 columns">
			<h3>Forster's List</h3>
		</div>
		<div class="small-6 large-6  columns">
			<div id="loginBtn">{{> loginButtons}}</div>
		</div>
	</div>

	<!-- Subtitle and spacer -->
	<div class="row">
		<div class="small-12">
			<div class="magellan-container" data-magellan-expedition="fixed">
				<dl class="sub-nav">
					<dd data-magellan-arrival="todos"><a href="#todos">Todos</a></dd>
					<dd data-magellan-arrival="done-dismissed"><a href="#done-dismissed">Done/Dismissed</a></dd>
				</dl>
			</div>
		</div>
	</div>

	{{#if currentUser}}


			{{> todos}}


			{{> closedTask}}


	{{/if}} <!-- end: currentUser -->


		<!-- Input new Todos -->
		<div id="footer">
		<form class="new-task">

						<div class="row collapse">

							<div class="small-10 columns">
								<input type="text" name="text" placeholder="I want to..." />
							</div>
							<div class="small-2 columns">
								<input type="submit" class="button postfix" value="Go" />
							</div>

						</div>
		</form>
	</div>

	<br /><br /><br />
</body>

<!-- Cycle through the todolist -->
<template name="todos">

	{{#if tasks.count != undefined}}

			<!--  Inbox title -->
			<div class="row">
					<div class="small-12 large-12 columns">
						<p data-magellan-destination="todos">
							<strong>Inbox</strong> &nbsp;&nbsp;&nbsp;	<span class="label round radius">{{tasks.count}}</span>
							<a name="todos"></a>
						</p>
					</div>
			</div>

			<!--  Todo items -->
			{{#each tasks}}
					<div class="row">
							<div class="small-12 columns">
								{{> task}}
							</div>
					</div>

			{{/each}}
			<!-- a spacer row -->
			<div class="row">
					<div class="small-12 columns">
							<p>&nbsp;</p>
					</div>
			</div>

	{{else}}
			<!-- Nothing to show yet -->
			<div class="row">
					<div class="small-12 columns">
							<p>Nothing to show yet. Get started by entering a few items you like to get done!</p>
					</div>
			</div>

	{{/if}} <!-- end: If ther is nothing to show -->

</template>

<!--  Open todo items -->
<template name="task">

	<a data-reveal-id="{{_id}}">{{#markdown}}{{text}}{{/markdown}}</a>

	<div id="{{_id}}" class="reveal-modal xlarge" data-reveal aria-labelledby="modalTitle" aria-hidden="true" role="dialog">

	  	<p class="lead">{{#markdown}}{{text}}{{/markdown}}</p>

			<!-- Radius Button Group -->
			{{> activeTodoActionButtons}}

	  	<a class="close-reveal-modal" aria-label="Close">&#215;</a>
	</div>
	<script>
		$(document).foundation('reveal', 'reflow');
	</script>
</template><!-- End: List the open tasks -->

<template name="activeTodoActionButtons">
	<!-- Radius Button Group -->
	<ul class="button-group radius text-center btns">
		<li><button type="button" class="button tiny btnDone">Worked on</button></li>
		<li><button type="button" class="button tiny secondary btnDismiss">Dismiss</button></li>
		<li><button type="button" class="button tiny alert btnClose">Completed</button></li>
	</ul>

	<script>
		// $(document).foundation('reveal', 'reflow');
	</script>
</template>


<!-- Cycle through the todolist -->
<template name="closedTask">

	{{#if closedTasks.count != undefined}}

			<!--  Inbox title -->
			<div class="row">
					<div class="small-12 large-12 columns">
						<p data-magellan-destination="done-dismissed">
							<strong>Closed/Dismissed</strong> &nbsp;&nbsp;&nbsp;	<span class="label round radius">{{closedTasks.count}}</span>
							<a name="done-dismissed"></a>
						</p>
					</div>
			</div>

			<!--  Todo items -->
			{{#each closedTasks}}
					<div class="row">
							<div class="small-12 columns">

								<ul class="button-group radius left">
								  <li><a href="#" class="button tiny btnRevive">Re-open</a></li>
								  <li><a href="#" class="button tiny alert btnDelete">Delete</a></li>
								</ul>
								<p class="closed">&nbsp;&nbsp;&nbsp;<strike class="{{isDismissed standing}}">{{text}}</strike></p>

						</div>
					</div>
			{{/each}}
			<!-- a spacer row -->
			<div class="row">
					<div class="small-12 columns">
							<p>&nbsp;</p>
					</div>
			</div>

	{{else}}
			<!-- Nothing to show yet -->
			<div class="row">
					<div class="small-12 columns">
							<p>Nothing to show yet. Get started by entering a few items you like to get done!</p>
					</div>
			</div>

  {{/if}} 	<!-- end: If ther is nothing to show -->

</template>
