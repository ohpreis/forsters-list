<head>
	<title>Forster's List</title>
</head>

<body>

	<nav class="navbar navbar-default navbar-fixed-top">
	<div class="container">
		<div class="row">
			<form class="form-inline new-task" role="search">
				<div class="col-xs-2">
					<p style="margin-top: 8px; font-weight:bold; line-height: 2em;" title="Forster's List">FL</p>
				</div>
			<div class="col-xs-8">

	        <div class="form-group col-xs-12" style="margin-top: 6px;">
	          <input style="width: 100%;" type="text" name="text" class="form-control" placeholder="New todo">
	        </div>
			</div>
			<div class="col-xs-2">
				<p style="margin-top: 6px;"><button type="submit" class="btn btn-primary">Go</button></p>
			</div>
			</form>
		</div>
	</div>
	</nav>

	<div class="container">

		<!-- <div class="row">

				<ol class="breadcrumb">
					<li>Forster's List</li>
					<li>{{> loginButtons align="left"}}</li>
					{{#if currentUser}}

					{{else}}
						<li><span class="label label-warning">Please login!</span></li>
					{{/if}}
				</ol>

		</div> -->

		<div class="row">



				<div class="col-xs-12">
						<!-- Nav tabs -->
						<ul class="nav nav-pills pull-left" role="tablist">
							<li role="presentation" class="active">
								<a href="#home" aria-controls="home" role="tab" data-toggle="tab">Inbox {{> todoCount}} </a>
							</li>
							<li role="presentation">
								<a title="Done/Dismissed" href="#profile" aria-controls="profile" role="tab" data-toggle="tab">Done {{> doneTodoCount}} </a>
							</li>
							<li role="presentation">
								<a title="Put all your ideas in here" href="#messages" aria-controls="messages" role="tab" data-toggle="tab">Ideas {{> ideaCount}}</a>
							</li>
						</ul>
						<p style="padding-top: 10px;" class="pull-right">{{> loginButtons align="right"}}</p>
				</div>

				{{#if currentUser}}
				<div class="col-xs-12">

						<!-- Tab panes -->
						<div class="tab-content">
							<div role="tabpanel" class="tab-pane active" id="home">
									{{> todos}}
							</div>
							<div role="tabpanel" class="tab-pane" id="profile">
									{{> closedTodos}}
							</div>
							<div role="tabpanel" class="tab-pane" id="messages">
									{{> ideas}}
							</div>
						</div>
				</div>
				{{/if}} <!-- end: currentUser -->

		</div>




	</div>



</body>


<template name="todoCount">
	<span class="badge">{{theCount}}</span>
</template>
<template name="doneTodoCount">
	<span class="badge">{{theCount}}</span>
</template>
<template name="ideaCount">
	<span class="badge">{{theCount}}</span>
</template>

<!-- Cycle through the todolist -->
<template name="todos">

	{{#if tasks.count != undefined}}

			<div class="row">
				<div class="col-xs-12">
					<table class="table">
						<caption> <span class="badge pull-right">{{tasks.count}}</span></caption>
						<tbody>
							<!--  Todo items -->
							{{#each tasks}}
									{{> task}}
							{{/each}}
						</tbody>
					</table>

				</div>
			</div>


			<!-- a spacer row -->
			<div class="row">
					<div class="col-xs-12">
							<p>&nbsp;</p>
					</div>
			</div>

	{{else}}
			<!-- Nothing to show yet -->
			<div class="row">
					<div class="col-xs-12">
							<p>Start by adding a few todos.</p>
					</div>
			</div>
	{{/if}} <!-- end: If ther is nothing to show -->

</template>

<!--  Open todo items -->
<template name="task">

		<tr><td>
		<h4>
			<a href="#" class="openModal" data-toggle="modal" data-target="#{{_id}}">{{text}}</a>
		</h4>

		<!-- Modal -->
		<div class="modal fade" id="{{_id}}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
			<div class="modal-dialog" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
						<h4 class="modal-title" id="myModalLabel">FL</h4>
					</div>
					<div class="modal-body">
						<p class="lead">{{#markdown}}{{text}}{{/markdown}}</p>
						<p>Worked on: <span class="label label-primary pulls-right">{{touched}}</span></p>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-success btn-sm btnDone" data-dismiss="modal">
							<span class="glyphicon glyphicon-thumbs-up" aria-hidden="true"></span> Done
						</button>
						<button type="button" class="btn btn-warning btn-sm btnDismiss" data-dismiss="modal">
							<span class="glyphicon glyphicon-hand-down" aria-hidden="true"></span> Dissed
						</button>
						<button type="button" class="btn btn-primary btn-sm btnClose" data-dismiss="modal">
							<span class="glyphicon glyphicon-check" aria-hidden="true"></span> Close
						</button>
						<button type="button" class="btn btn-info btn-sm btnMoveToIdeas" data-dismiss="modal">
							<span class="glyphicon glyphicon-certificate" aria-hidden="true"></span> Idea
						</button>
						<button type="button" class="btn btn-default" data-dismiss="modal">&times;</button>
					</div>
				</div>
			</div>
		</div>
	</td></tr>

</template><!-- End: List the open tasks -->

<template name="closedTodos">

		{{#if closedTasks.count != undefined}}
				<div class="row">
					<div class="col-xs-12">
						<table class="table">
							<caption>
									<p class="pull-right">
										showing <span class="badge">{{closedTasks.count}}</span> of
										{{> doneTodoCount}}
									</p>
								</caption>
							<tbody>
								<!--  Todo items -->
								{{#each closedTasks}}
										{{> closedTask}}
								{{/each}}
							</tbody>
						</table>

					</div>
				</div>
		{{else}}
				<!-- Nothing to show yet -->
				<div class="row">
						<div class="col-xs-12">
								<p>The deleted/dismissed section is empty.</p>
						</div>
				</div>

		{{/if}} <!-- end: If ther is nothing to show -->

</template>

<!-- Cycle through the todolist -->
<template name="closedTask">

			<tr class="{{isDismissed standing}}"><td>
			<h5><s><a href="#" class="openModal" data-toggle="modal" data-target="#{{_id}}">{{text}}</a></s></h5>

			<!-- Modal -->
			<div class="modal fade" id="{{_id}}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
				<div class="modal-dialog" role="document">
					<div class="modal-content">
						<div class="modal-header">
							<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
							<h4 class="modal-title" id="myModalLabel">Closed</h4>
						</div>
						<div class="modal-body">
							<p class="lead">{{#markdown}}{{text}}{{/markdown}}</p>
						</div>
						<div class="modal-footer">
							<button type="button" class="btn btn-danger btnDelete" data-dismiss="modal">Delete</button>
							<button type="button" class="btn btn-primary btnRevive">Revive</button>
							<button type="button" class="btn btn-default" data-dismiss="modal">&times;</button>
						</div>
					</div>
				</div>
			</div>
		</td></tr>


</template>

<!-- Cycle through the ideaList -->
<template name="ideas">

	{{#if items.count != undefined}}

			<div class="row">
				<div class="col-xs-12">
					<table class="table">
						<caption> <span class="badge pull-right">{{ideas.count}}</span></caption>
						<tbody>
							<!--  Todo items -->
							{{#each items}}
									{{> ideaItems}}
							{{/each}}
						</tbody>
					</table>

				</div>
			</div>


			<!-- a spacer row -->
			<div class="row">
					<div class="col-xs-12">
							<p>&nbsp;</p>
					</div>
			</div>

	{{else}}
			<!-- Nothing to show yet -->
			<div class="row">
					<div class="col-xs-12">
							<p>Start by adding a few todos.</p>
					</div>
			</div>
	{{/if}} <!-- end: If ther is nothing to show -->

</template>

<!-- Cycle through the todolist -->
<template name="ideaItems">

			<tr class=""><td>
			<h5><a href="#" class="openModal" data-toggle="modal" data-target="#{{_id}}">{{text}}</a></h5>

			<!-- Modal -->
			<div class="modal fade" id="{{_id}}" tabindex="-1" role="dialog" aria-labelledby="Ideas">
				<div class="modal-dialog" role="document">
					<div class="modal-content">
						<div class="modal-header">
							<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
							<h4 class="modal-title" id="myModalLabel">Idea</h4>
						</div>
						<div class="modal-body">
							<p class="lead">{{#markdown}}{{text}}{{/markdown}}</p>
						</div>
						<div class="modal-footer">
							<button type="button" class="btn btn-danger btnDelete" data-dismiss="modal">Delete</button>
							<button type="button" class="btn btn-primary btnMoveFromIdeas">Open</button>
							<button type="button" class="btn btn-default" data-dismiss="modal">&times;</button>
						</div>
					</div>
				</div>
			</div>
		</td></tr>


</template>
